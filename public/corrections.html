<!DOCTYPE html>
<html>
<head>
    <title>Schedule</title>
    <script src="js/header.js" type="text/javascript"></script>

    <style>

        /* Style the header */
        header {
            background-color: #333;
            color: #fff;
            padding: 10px;
        }

        /* Style the navigation menu */
        nav ul {
            list-style-type: none;
            padding: 0;
            text-align: center;
        }

        nav ul li {
            display: inline;
            margin: 0 10px;
        }

        nav ul li a {
            text-decoration: none;
            color: #fff;
            font-weight: bold;
        }

         /*Style the h1 heading (same as before) */
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        /* Style the schedule block */
        .schedule {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #ccc;
            text-align: center;
            padding: 10px;
        }

        th {
            background-color: #f0f0f0;
        }

        .schedule-item,
        .sister-item {
            background-color: #007BFF;
            color: #fff;
            border-radius: 5px; /* Changed border radius for a box-like appearance */
            padding: 5px; /* Adjusted padding for a more compact look */
            cursor: pointer;
            display: inline-block; /* Make the items only as wide as the text within them */
            margin: 5px;
        }

         /*Rest of the CSS (same as before)*/

        #schedule-box {
            margin-left: 2%;
            margin-right: 2%;
            font-size: 10pt;
            font-size: 0.8vw;
            width: 95%;
            border-collapse: separate;
        }

        #schedule-box td:nth-child(1) {
            width: 2%;
        }

        #schedule-box td:first-child {
            width: fit-content;
        }

        #schedule-box td {
            position: relative;
            min-height: 20px;
            border-style: solid;
            border-color: slategray;
            border-width: 2px;
            /*width: 20%;*/
            width: auto;
            white-space: nowrap; /* Prevent text from wrapping */
            overflow: hidden; /* Hide overflow content */
            text-overflow: ellipsis; /* Display ellipsis (...) for truncated text */
            padding: 5px; /* Example padding */
            margin: 0; /* Example margin */
        }

        #FridayNoClass {
            background-color: #b60000;
        }

        #WednesdayNoClass {
            background-color: #b60000;
        }


    </style>
</head>
<body>
<header-component></header-component>
<main>
    <h1>Schedule</h1>
    <table id="schedule-box" class="schedule">
        <thead>
        <tr>
            <th></th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
        </tr>
        </thead>
        <tbody>
        <!-- Rows for each timeslot -->
        <tr>
            <td>8:30<br>(W9:00)</td>
            <td class="drop-area" id="Monday1">
<!--                <div class="schedule-item">Class 1</div>-->
<!--                <div class="schedule-item">Class 2</div>-->
            </td>
            <td class="drop-area" id="Tuesday1"></td>
            <td class="drop-area" id="WednesdayA1" rowspan="2"></td>
<!--            <td class="drop-area" id="WednesdayA1"></td>-->
            <td class="drop-area" id="Thursday1"></td>
            <td class="drop-area" id="Friday1"></td>
        </tr>
        <tr>
            <td>10:00</td>
            <td class="drop-area" id="Monday2">

            </td>
            <td class="drop-area" id="Tuesday2"></td>
<!--            <td class="drop-area" id="Wednesday2"></td>-->
            <td class="drop-area" id="Thursday2">
<!--                <div class="schedule-item">Class 3</div>-->
            </td>
            <td class="drop-area" id="Friday2"></td>
        </tr>
        <tr>
            <td>11:30<br>(W12:15)</td>
            <td class="drop-area" id="Monday3"></td>
            <td class="drop-area" id="Tuesday3"></td>
            <td class="drop-area" id="WednesdayB1" rowspan="2"></td>
<!--            <td class="drop-area" id="WednesdayB1"></td>-->
            <td class="drop-area" id="Thursday3"></td>
            <td class="drop-area" id="Friday3"></td>
        </tr>
        <tr>
            <td>1:00</td>
            <td class="drop-area" id="Monday4"></td>
            <td class="drop-area" id="Tuesday4"></td>
<!--            <td class="drop-area" id="Wednesday4"></td>-->
            <td class="drop-area" id="Thursday4"></td>
            <td class="drop-area" id="Friday4"></td>
        </tr>
        <tr>
            <td>2:30</td>
            <td class="drop-area" id="Monday5"></td>
            <td class="drop-area" id="Tuesday5"></td>
            <td class="drop-area" id="WednesdayNoClass" rowspan="2">No Class</td>
<!--            <td class="drop-area" id="WednesdayNoClass">No Class</td>-->
            <td class="drop-area" id="Thursday5"></td>
            <td class="drop-area" id="Friday5"></td>
        </tr>
        <tr>
            <td>4:00</td>
            <td class="drop-area" id="Monday6"></td>
            <td class="drop-area" id="Tuesday6"></td>
<!--            <td class="drop-area" id="Wednesday6"></td>-->
            <td class="drop-area" id="Thursday6"></td>
            <td class="drop-area" id="Friday6"></td>
        </tr>
        <tr>
            <td>5:30</td>
            <td class="drop-area" id="Monday7"></td>
            <td class="drop-area" id="Tuesday7"></td>
            <td class="drop-area" id="Wednesday7"></td>
            <td class="drop-area" id="Thursday7"></td>
            <td class="drop-area" id="FridayNoClass" rowspan="2">No Class</td>
<!--            <td class="drop-area" id="FridayNoClass">No Class</td>-->
        </tr>
        <tr>
            <td>7:00</td>
            <td class="drop-area" id="Monday8"></td>
            <td class="drop-area" id="Tuesday8"></td>
            <td class="drop-area" id="Wednesday8"></td>
            <td class="drop-area" id="Thursday8"></td>
        </tr>

        </tbody>
    </table>

</main>
<script>
    // JavaScript functions for drag-and-drop
    function drag(target, event) {
        event.dataTransfer.setData("id", target.id);
        let parentID = target.parentElement.id;
        let tempID = target.id;
        let justName = tempID.split('-')[0];
        let perWeek = target.getAttribute("singleOrDouble");
        console.log("DragID: " + target.id);
    }

    function drop(target, event) {
        let id = event.dataTransfer.getData('id');
        let parentID = document.getElementById(id).parentElement.id;
        let classType = document.getElementById(id).getAttribute("classType");
        let singleOrDouble = document.getElementById(id).getAttribute("singOrDoub");
        let placeDropped = target.id;
        let sisterID = id + "sister";
        let sisterDiv = document.getElementById(sisterID);

        // Check for class drop conditions, if necessary

        if (target.id === "WednesdayNoClass" || target.id === "FridayNoClass") {
            console.log("Bad Drop");
            event.dataTransfer.dropEffect = "none";
            alert("Sorry, you cannot move classes to here.");
            return;
        }

        if (sisterDiv) {
            let sisterClass = sisterDiv.getAttribute("class");

            let sisterPlace = sisterParse(placeDropped);
            let sisterTarget = document.getElementById(sisterPlace);

            try {
                sisterTarget.appendChild(sisterDiv);
            } catch (err) {
                if (sisterTarget === null) {
                    alert("Cannot drop class here.");
                }
                console.log("There was an error moving sister: ", err);
                return;
            }
        }

        let tId = target.id;
        target.appendChild(document.getElementById(id));
        event.preventDefault();

        let newDayTime = tId;
        let timeChildren = document.getElementById(newDayTime).childNodes;
        let timeChildrenArray = [];

        for (let i = 0; i < timeChildren.length; i++) {
            if (typeof timeChildren[i] !== 'undefined') {
                timeChildrenArray.push(timeChildren[i].id);
            }
        }

        timeChildrenArray.sort();
        let tGt = document.getElementById(newDayTime);
        for (let j = 0; j < timeChildrenArray.length; j++) {
            if (typeof timeChildrenArray[j] !== 'undefined') {
                tGt.appendChild(document.getElementById(timeChildrenArray[j]));
            }
        }
    }
</script>
<script src="js/newSisterParse.js"></script>
<script src="js/corrections.js" type="text/javascript"></script>
<script type="module" src="js/apicall.js"></script>
<script type="module" src="js/importSections.js"></script>
</body>
</html>
